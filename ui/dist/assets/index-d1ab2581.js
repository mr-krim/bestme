var At=Object.defineProperty;var Ot=(t,e,n)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Qe=(t,e,n)=>(Ot(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Le(){}function St(t){return t()}function it(){return Object.create(null)}function ue(t){t.forEach(St)}function Ft(t){return typeof t=="function"}function Tt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Nt(t){return Object.keys(t).length===0}function o(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function w(){return E(" ")}function qt(){return E("")}function D(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Mt(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e==null?"":e}function ct(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function Re(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Je(t){const e=t.querySelector(":checked");return e&&e.__value}function rt(t,e,n){t.classList.toggle(e,!!n)}let Oe;function Ae(t){Oe=t}function Lt(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function Ht(t){Lt().$$.on_mount.push(t)}function Ut(t){Lt().$$.on_destroy.push(t)}const Ie=[],dt=[];let Se=[];const ut=[],Vt=Promise.resolve();let Ye=!1;function Dt(){Ye||(Ye=!0,Vt.then(Pt))}function Fe(t){Se.push(t)}const Xe=new Set;let Ee=0;function Pt(){if(Ee!==0)return;const t=Oe;do{try{for(;Ee<Ie.length;){const e=Ie[Ee];Ee++,Ae(e),jt(e.$$)}}catch(e){throw Ie.length=0,Ee=0,e}for(Ae(null),Ie.length=0,Ee=0;dt.length;)dt.pop()();for(let e=0;e<Se.length;e+=1){const n=Se[e];Xe.has(n)||(Xe.add(n),n())}Se.length=0}while(Ie.length);for(;ut.length;)ut.pop()();Ye=!1,Xe.clear(),Ae(t)}function jt(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Fe)}}function zt(t){const e=[],n=[];Se.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Se=e}const Wt=new Set;function Bt(t,e){t&&t.i&&(Wt.delete(t),t.i(e))}function ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Gt(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),Fe(()=>{const a=t.$$.on_mount.map(St).filter(Ft);t.$$.on_destroy?t.$$.on_destroy.push(...a):ue(a),t.$$.on_mount=[]}),s.forEach(Fe)}function Kt(t,e){const n=t.$$;n.fragment!==null&&(zt(n.after_update),ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Qt(t,e){t.$$.dirty[0]===-1&&(Ie.push(t),Dt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Jt(t,e,n,l,s,a,c=null,v=[-1]){const h=Oe;Ae(t);const g=t.$$={fragment:null,ctx:[],props:a,update:Le,not_equal:s,bound:it(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:it(),dirty:v,skip_bound:!1,root:e.target||h.$$.root};c&&c(g.root);let f=!1;if(g.ctx=n?n(t,e.props||{},(C,p,...m)=>{const y=m.length?m[0]:p;return g.ctx&&s(g.ctx[C],g.ctx[C]=y)&&(!g.skip_bound&&g.bound[C]&&g.bound[C](y),f&&Qt(t,C)),p}):[],g.update(),f=!0,ue(g.before_update),g.fragment=l?l(g.ctx):!1,e.target){if(e.hydrate){const C=Mt(e.target);g.fragment&&g.fragment.l(C),C.forEach(P)}else g.fragment&&g.fragment.c();e.intro&&Bt(t.$$.fragment),Gt(t,e.target,e.anchor),Pt()}Ae(h)}class Xt{constructor(){Qe(this,"$$");Qe(this,"$$set")}$destroy(){Kt(this,1),this.$destroy=Le}$on(e,n){if(!Ft(n))return Le;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Nt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yt);function Zt(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function ft(t,e=!1){const n=Zt(),l=`_${n}`;return Object.defineProperty(window,l,{value:s=>(e&&Reflect.deleteProperty(window,l),t==null?void 0:t(s)),writable:!1,configurable:!0}),n}async function F(t,e={}){return new Promise((n,l)=>{const s=ft(c=>{n(c),Reflect.deleteProperty(window,`_${a}`)},!0),a=ft(c=>{l(c),Reflect.deleteProperty(window,`_${s}`)},!0);window.__TAURI_IPC__({cmd:t,callback:s,error:a,...e})})}function mt(t,e,n){const l=t.slice();return l[43]=e[n],l}function _t(t,e,n){const l=t.slice();return l[46]=e[n][0],l[47]=e[n][1],l}function ht(t,e,n){const l=t.slice();return l[50]=e[n],l}function pt(t,e,n){const l=t.slice();return l[53]=e[n],l}function gt(t){let e,n=t[53]+"",l,s;return{c(){e=d("option"),l=E(n),e.__value=s=t[53],Z(e,e.__value)},m(a,c){A(a,e,c),o(e,l)},p(a,c){c[0]&1&&n!==(n=a[53]+"")&&G(l,n),c[0]&1&&s!==(s=a[53])&&(e.__value=s,Z(e,e.__value))},d(a){a&&P(e)}}}function vt(t){let e,n=t[50]+"",l,s;return{c(){e=d("option"),l=E(n),e.__value=s=t[50],Z(e,e.__value)},m(a,c){A(a,e,c),o(e,l)},p(a,c){c[0]&2&&n!==(n=a[50]+"")&&G(l,n),c[0]&2&&s!==(s=a[50])&&(e.__value=s,Z(e,e.__value))},d(a){a&&P(e)}}}function kt(t){let e,n=t[47]+"",l,s;return{c(){e=d("option"),l=E(n),e.__value=s=t[46],Z(e,e.__value)},m(a,c){A(a,e,c),o(e,l)},p(a,c){c[0]&4&&n!==(n=a[47]+"")&&G(l,n),c[0]&4&&s!==(s=a[46])&&(e.__value=s,Z(e,e.__value))},d(a){a&&P(e)}}}function bt(t){let e,n,l,s,a,c,v,h,g,f,C,p,m,y,R,L,b=t[12]&&wt(t);return{c(){e=d("div"),n=d("div"),l=d("label"),l.textContent="Command Prefix (optional)",s=w(),a=d("input"),c=w(),v=d("div"),h=d("label"),h.textContent="Require Prefix",g=w(),f=d("input"),C=w(),p=d("div"),m=d("div"),m.textContent="Voice Commands Active",y=w(),b&&b.c(),i(l,"for","command-prefix"),i(l,"class","svelte-a7ohsk"),i(a,"id","command-prefix"),i(a,"type","text"),i(a,"placeholder","e.g., Hey"),i(a,"class","svelte-a7ohsk"),i(n,"class","setting-row svelte-a7ohsk"),i(h,"for","require-prefix"),i(h,"class","svelte-a7ohsk"),i(f,"id","require-prefix"),i(f,"type","checkbox"),i(v,"class","setting-row svelte-a7ohsk"),i(e,"class","voice-command-settings svelte-a7ohsk"),i(m,"class","indicator-badge svelte-a7ohsk"),i(p,"class","voice-command-indicator svelte-a7ohsk")},m(I,M){A(I,e,M),o(e,n),o(n,l),o(n,s),o(n,a),Z(a,t[10]),o(e,c),o(e,v),o(v,h),o(v,g),o(v,f),f.checked=t[11],A(I,C,M),A(I,p,M),o(p,m),o(p,y),b&&b.m(p,null),R||(L=[D(a,"input",t[28]),D(f,"change",t[29])],R=!0)},p(I,M){M[0]&1024&&a.value!==I[10]&&Z(a,I[10]),M[0]&2048&&(f.checked=I[11]),I[12]?b?b.p(I,M):(b=wt(I),b.c(),b.m(p,null)):b&&(b.d(1),b=null)},d(I){I&&(P(e),P(C),P(p)),b&&b.d(),R=!1,ue(L)}}}function wt(t){let e,n,l,s=t[12].command_type+"",a,c;return{c(){e=d("div"),n=E("Last command: "),l=d("span"),a=E(s),i(l,"class",c="command-type-"+t[12].command_type+" svelte-a7ohsk"),i(e,"class","last-command svelte-a7ohsk")},m(v,h){A(v,e,h),o(e,n),o(e,l),o(l,a)},p(v,h){h[0]&4096&&s!==(s=v[12].command_type+"")&&G(a,s),h[0]&4096&&c!==(c="command-type-"+v[12].command_type+" svelte-a7ohsk")&&i(l,"class",c)},d(v){v&&P(e)}}}function yt(t){let e;return{c(){e=d("span"),e.textContent="(Translating to English)",i(e,"class","translation-indicator svelte-a7ohsk")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function Ct(t){let e,n,l,s,a,c,v,h,g,f,C,p;function m(L,b){return L[14].length===0?$t:xt}let y=m(t),R=y(t);return{c(){e=d("div"),n=d("div"),l=d("h3"),l.textContent="Voice Command History",s=w(),a=d("div"),c=d("button"),c.textContent="Refresh",v=w(),h=d("button"),h.textContent="Clear History",g=w(),f=d("div"),R.c(),i(l,"class","svelte-a7ohsk"),i(c,"class","action-button svelte-a7ohsk"),i(h,"class","action-button svelte-a7ohsk"),i(a,"class","command-history-actions svelte-a7ohsk"),i(n,"class","command-history-header svelte-a7ohsk"),i(f,"class","command-history-list svelte-a7ohsk"),i(e,"class","command-history-panel svelte-a7ohsk")},m(L,b){A(L,e,b),o(e,n),o(n,l),o(n,s),o(n,a),o(a,c),o(a,v),o(a,h),o(e,g),o(e,f),R.m(f,null),C||(p=[D(c,"click",t[20]),D(h,"click",t[21])],C=!0)},p(L,b){y===(y=m(L))&&R?R.p(L,b):(R.d(1),R=y(L),R&&(R.c(),R.m(f,null)))},d(L){L&&P(e),R.d(),C=!1,ue(p)}}}function xt(t){let e,n=ce(t[14]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Rt(mt(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=qt()},m(s,a){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(s,a);A(s,e,a)},p(s,a){if(a[0]&16384){n=ce(s[14]);let c;for(c=0;c<n.length;c+=1){const v=mt(s,n,c);l[c]?l[c].p(v,a):(l[c]=Rt(v),l[c].c(),l[c].m(e.parentNode,e))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(s){s&&P(e),ze(l,s)}}}function $t(t){let e;return{c(){e=d("div"),e.textContent="No commands detected yet",i(e,"class","command-history-empty svelte-a7ohsk")},m(n,l){A(n,e,l)},p:Le,d(n){n&&P(e)}}}function Rt(t){let e,n,l=t[43].command_type+"",s,a,c,v,h,g=t[43].trigger_text+"",f,C,p,m,y=It(t[43].timestamp)+"",R,L;return{c(){e=d("div"),n=d("div"),s=E(l),c=w(),v=d("div"),h=E('"'),f=E(g),C=E('"'),p=w(),m=d("div"),R=E(y),L=w(),i(n,"class",a="command-type "+t[43].command_type+" svelte-a7ohsk"),i(v,"class","command-trigger svelte-a7ohsk"),i(m,"class","command-time svelte-a7ohsk"),i(e,"class","command-history-item svelte-a7ohsk")},m(b,I){A(b,e,I),o(e,n),o(n,s),o(e,c),o(e,v),o(v,h),o(v,f),o(v,C),o(e,p),o(e,m),o(m,R),o(e,L)},p(b,I){I[0]&16384&&l!==(l=b[43].command_type+"")&&G(s,l),I[0]&16384&&a!==(a="command-type "+b[43].command_type+" svelte-a7ohsk")&&i(n,"class",a),I[0]&16384&&g!==(g=b[43].trigger_text+"")&&G(f,g),I[0]&16384&&y!==(y=It(b[43].timestamp)+"")&&G(R,y)},d(b){b&&P(e)}}}function Et(t){let e,n,l,s,a,c,v=t[16].message+"",h,g;function f(m,y){return y[0]&65536&&(l=null),y[0]&65536&&(s=null),m[16].type==="delete"?cn:m[16].type==="undo"?an:m[16].type==="redo"?sn:m[16].type==="capitalize"||m[16].type==="lowercase"?on:m[16].type==="newline"||m[16].type==="newparagraph"?ln:(l==null&&(l=!!["period","comma","questionmark","exclamationmark"].includes(m[16].type)),l?nn:(s==null&&(s=!!["pause","resume","stop"].includes(m[16].type)),s?tn:en))}let C=f(t,[-1,-1]),p=C(t);return{c(){e=d("div"),n=d("div"),p.c(),a=w(),c=d("div"),h=E(v),i(n,"class","command-feedback-icon svelte-a7ohsk"),i(c,"class","command-feedback-message svelte-a7ohsk"),i(e,"class",g="command-feedback command-feedback-"+t[16].type+" svelte-a7ohsk")},m(m,y){A(m,e,y),o(e,n),p.m(n,null),o(e,a),o(e,c),o(c,h)},p(m,y){C!==(C=f(m,y))&&(p.d(1),p=C(m),p&&(p.c(),p.m(n,null))),y[0]&65536&&v!==(v=m[16].message+"")&&G(h,v),y[0]&65536&&g!==(g="command-feedback command-feedback-"+m[16].type+" svelte-a7ohsk")&&i(e,"class",g)},d(m){m&&P(e),p.d()}}}function en(t){let e;return{c(){e=E("🎤")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function tn(t){let e;return{c(){e=E("⏯️")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function nn(t){let e;return{c(){e=E("✏️")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function ln(t){let e;return{c(){e=E("↵")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function on(t){let e;return{c(){e=E("🔤")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function sn(t){let e;return{c(){e=E("↪️")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function an(t){let e;return{c(){e=E("↩️")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function cn(t){let e;return{c(){e=E("🗑️")},m(n,l){A(n,e,l)},d(n){n&&P(e)}}}function rn(t){let e,n,l,s,a,c,v,h,g,f,C,p,m,y,R,L=t[6]?"Stop":"Start",b,I,M,te,B,fe,K,ne,Q,me,O,re,le,oe,W,_e,Te,Pe,Ne,he,qe,x,se,pe,Me,ae,J,u,k,X,ge,j,Y,ve,$,He,Ze,Ue,Ve=t[19](t[5])+"",We,xe,$e,ke,de,et,tt,be,De=t[13]?"Hide":"Show",Be,nt,lt,ee,ot,st,Ge,je,Ke,at,we=ce(t[0]),T=[];for(let r=0;r<we.length;r+=1)T[r]=gt(pt(t,we,r));let ye=ce(t[1]),N=[];for(let r=0;r<ye.length;r+=1)N[r]=vt(ht(t,ye,r));let Ce=ce(t[2]),q=[];for(let r=0;r<Ce.length;r+=1)q[r]=kt(_t(t,Ce,r));let H=t[9]&&bt(t),z=t[15]&&t[5]!=="en"&&yt(),U=t[13]&&Ct(t),V=t[16]&&t[16].show&&Et(t);return{c(){e=d("main"),n=d("h1"),n.textContent="BestMe",l=w(),s=d("div"),a=d("div"),c=d("label"),c.textContent="Audio Device",v=w(),h=d("select");for(let r=0;r<T.length;r+=1)T[r].c();g=w(),f=d("div"),C=d("label"),C.textContent="Whisper Model",p=w(),m=d("select");for(let r=0;r<N.length;r+=1)N[r].c();y=w(),R=d("button"),b=E(L),I=E(" Recording"),M=w(),te=d("div"),B=d("div"),fe=w(),K=d("div"),ne=d("div"),Q=d("label"),Q.textContent="Language:",me=w(),O=d("select");for(let r=0;r<q.length;r+=1)q[r].c();re=w(),le=d("div"),oe=d("label"),W=d("input"),Te=w(),Pe=d("span"),Ne=w(),he=d("span"),he.textContent="Translate to English",qe=w(),x=d("div"),se=d("div"),pe=d("h2"),pe.textContent="Voice Commands",Me=w(),ae=d("label"),J=d("input"),u=w(),k=d("span"),X=w(),H&&H.c(),ge=w(),j=d("div"),Y=d("div"),ve=d("div"),$=d("div"),He=d("span"),He.textContent="Language:",Ze=w(),Ue=d("span"),We=E(Ve),xe=w(),z&&z.c(),$e=w(),ke=d("div"),de=d("button"),et=E("Clear"),tt=w(),be=d("button"),Be=E(De),nt=E(" History"),lt=w(),ee=d("textarea"),ot=w(),U&&U.c(),st=w(),V&&V.c(),Ge=w(),je=d("footer"),je.innerHTML="<p>BestMe v0.1.0 - Modern Speech-to-Text Application</p>",i(n,"class","svelte-a7ohsk"),i(c,"for","device-select"),i(c,"class","svelte-a7ohsk"),i(h,"id","device-select"),i(h,"class","svelte-a7ohsk"),t[3]===void 0&&Fe(()=>t[22].call(h)),i(a,"class","select-container svelte-a7ohsk"),i(C,"for","model-select"),i(C,"class","svelte-a7ohsk"),i(m,"id","model-select"),i(m,"class","svelte-a7ohsk"),t[4]===void 0&&Fe(()=>t[23].call(m)),i(f,"class","select-container svelte-a7ohsk"),i(R,"class","record-button svelte-a7ohsk"),rt(R,"recording",t[6]),i(s,"class","controls svelte-a7ohsk"),i(B,"class","level-indicator svelte-a7ohsk"),ct(B,"width",t[8]*100+"%"),i(te,"class","level-meter svelte-a7ohsk"),i(Q,"for","language-select"),i(Q,"class","svelte-a7ohsk"),i(O,"id","language-select"),O.disabled=t[6],i(O,"class","svelte-a7ohsk"),t[5]===void 0&&Fe(()=>t[24].call(O)),i(ne,"class","language-selector svelte-a7ohsk"),i(W,"type","checkbox"),W.disabled=_e=t[6]||t[5]==="en",i(W,"class","svelte-a7ohsk"),i(Pe,"class","toggle-slider-small svelte-a7ohsk"),i(oe,"class","toggle-switch-small svelte-a7ohsk"),i(he,"class","toggle-label svelte-a7ohsk"),i(le,"class","translate-toggle svelte-a7ohsk"),i(K,"class","transcription-controls svelte-a7ohsk"),i(pe,"class","svelte-a7ohsk"),i(J,"type","checkbox"),i(J,"class","svelte-a7ohsk"),i(k,"class","toggle-slider svelte-a7ohsk"),i(ae,"class","toggle-switch svelte-a7ohsk"),i(se,"class","voice-commands-header svelte-a7ohsk"),i(x,"class","voice-commands svelte-a7ohsk"),i(He,"class","indicator-label svelte-a7ohsk"),i(Ue,"class","indicator-value svelte-a7ohsk"),i($,"class","language-indicator svelte-a7ohsk"),i(de,"class","action-button svelte-a7ohsk"),de.disabled=t[6],i(be,"class","action-button svelte-a7ohsk"),i(ke,"class","actions svelte-a7ohsk"),i(ve,"class","transcription-header svelte-a7ohsk"),i(ee,"placeholder","Transcription will appear here..."),ee.readOnly=t[6],i(ee,"class","svelte-a7ohsk"),i(Y,"class","transcription-area svelte-a7ohsk"),i(j,"class","transcription-container svelte-a7ohsk"),i(je,"class","svelte-a7ohsk"),i(e,"class","svelte-a7ohsk")},m(r,S){A(r,e,S),o(e,n),o(e,l),o(e,s),o(s,a),o(a,c),o(a,v),o(a,h);for(let _=0;_<T.length;_+=1)T[_]&&T[_].m(h,null);Re(h,t[3],!0),o(s,g),o(s,f),o(f,C),o(f,p),o(f,m);for(let _=0;_<N.length;_+=1)N[_]&&N[_].m(m,null);Re(m,t[4],!0),o(s,y),o(s,R),o(R,b),o(R,I),o(e,M),o(e,te),o(te,B),o(e,fe),o(e,K),o(K,ne),o(ne,Q),o(ne,me),o(ne,O);for(let _=0;_<q.length;_+=1)q[_]&&q[_].m(O,null);Re(O,t[5],!0),o(K,re),o(K,le),o(le,oe),o(oe,W),W.checked=t[15],o(oe,Te),o(oe,Pe),o(le,Ne),o(le,he),o(e,qe),o(e,x),o(x,se),o(se,pe),o(se,Me),o(se,ae),o(ae,J),J.checked=t[9],o(ae,u),o(ae,k),o(x,X),H&&H.m(x,null),o(e,ge),o(e,j),o(j,Y),o(Y,ve),o(ve,$),o($,He),o($,Ze),o($,Ue),o(Ue,We),o($,xe),z&&z.m($,null),o(ve,$e),o(ve,ke),o(ke,de),o(de,et),o(ke,tt),o(ke,be),o(be,Be),o(be,nt),o(Y,lt),o(Y,ee),Z(ee,t[7]),o(j,ot),U&&U.m(j,null),o(e,st),V&&V.m(e,null),o(e,Ge),o(e,je),Ke||(at=[D(h,"change",t[22]),D(m,"change",t[23]),D(R,"click",t[18]),D(O,"change",t[24]),D(W,"change",t[25]),D(J,"change",t[26]),D(J,"change",t[27]),D(de,"click",t[30]),D(be,"click",t[31]),D(ee,"input",t[32])],Ke=!0)},p(r,S){if(S[0]&1){we=ce(r[0]);let _;for(_=0;_<we.length;_+=1){const ie=pt(r,we,_);T[_]?T[_].p(ie,S):(T[_]=gt(ie),T[_].c(),T[_].m(h,null))}for(;_<T.length;_+=1)T[_].d(1);T.length=we.length}if(S[0]&9&&Re(h,r[3]),S[0]&2){ye=ce(r[1]);let _;for(_=0;_<ye.length;_+=1){const ie=ht(r,ye,_);N[_]?N[_].p(ie,S):(N[_]=vt(ie),N[_].c(),N[_].m(m,null))}for(;_<N.length;_+=1)N[_].d(1);N.length=ye.length}if(S[0]&18&&Re(m,r[4]),S[0]&64&&L!==(L=r[6]?"Stop":"Start")&&G(b,L),S[0]&64&&rt(R,"recording",r[6]),S[0]&256&&ct(B,"width",r[8]*100+"%"),S[0]&4){Ce=ce(r[2]);let _;for(_=0;_<Ce.length;_+=1){const ie=_t(r,Ce,_);q[_]?q[_].p(ie,S):(q[_]=kt(ie),q[_].c(),q[_].m(O,null))}for(;_<q.length;_+=1)q[_].d(1);q.length=Ce.length}S[0]&64&&(O.disabled=r[6]),S[0]&36&&Re(O,r[5]),S[0]&100&&_e!==(_e=r[6]||r[5]==="en")&&(W.disabled=_e),S[0]&32768&&(W.checked=r[15]),S[0]&512&&(J.checked=r[9]),r[9]?H?H.p(r,S):(H=bt(r),H.c(),H.m(x,null)):H&&(H.d(1),H=null),S[0]&32&&Ve!==(Ve=r[19](r[5])+"")&&G(We,Ve),r[15]&&r[5]!=="en"?z||(z=yt(),z.c(),z.m($,null)):z&&(z.d(1),z=null),S[0]&64&&(de.disabled=r[6]),S[0]&8192&&De!==(De=r[13]?"Hide":"Show")&&G(Be,De),S[0]&64&&(ee.readOnly=r[6]),S[0]&128&&Z(ee,r[7]),r[13]?U?U.p(r,S):(U=Ct(r),U.c(),U.m(j,null)):U&&(U.d(1),U=null),r[16]&&r[16].show?V?V.p(r,S):(V=Et(r),V.c(),V.m(e,Ge)):V&&(V.d(1),V=null)},i:Le,o:Le,d(r){r&&P(e),ze(T,r),ze(N,r),ze(q,r),H&&H.d(),z&&z.d(),U&&U.d(),V&&V.d(),Ke=!1,ue(at)}}}function It(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown"}function dn(t,e,n){let l=[],s=[],a=[],c="",v="",h="auto",g=!1,f="",C=0,p=!1,m="",y=!1,R=null,L=!1,b=[],I=null,M=null,te=null,B=!1,fe=null,K=null;Ht(async()=>{try{n(0,l=await F("get_audio_devices")),n(1,s=await F("get_whisper_models"));try{n(2,a=await F("get_supported_languages"))}catch(u){console.error("Failed to load language options:",u),n(2,a=[["auto","Auto-detect"],["en","English"],["es","Spanish"],["fr","French"],["de","German"]])}try{const u=await F("get_settings");u?(n(3,c=u.device_name||(l.length>0?l[0]:"")),n(4,v=u.model_name||(s.length>0?s[0]:"")),u.speech&&(n(5,h=u.speech.language||"auto"),n(15,B=u.speech.translate_to_english||!1))):(l.length>0&&n(3,c=l[0]),s.length>0&&n(4,v=s[0]))}catch{l.length>0&&n(3,c=l[0]),s.length>0&&n(4,v=s[0])}try{const u=await F("plugin:voice_commands:get_voice_command_config");u&&(n(9,p=u.enabled),n(10,m=u.prefix||"computer"),n(11,y=u.require_prefix))}catch(u){console.error("Failed to load voice command config:",u);try{const k=await F("get_voice_command_settings");k&&(n(9,p=k.enabled),n(10,m=k.command_prefix||"computer"),n(11,y=k.require_prefix))}catch(k){console.error("Failed to load voice command settings:",k)}}try{n(14,b=await F("plugin:voice_commands:get_command_history"))}catch(u){console.error("Failed to load command history:",u),n(14,b=[])}I=window.setInterval(async()=>{if(g)try{n(8,C=await F("plugin:audio:get_peak_level"))}catch(u){console.error("Failed to get peak level:",u)}},100),M=window.setInterval(async()=>{if(g)try{const u=await F("plugin:transcribe:get_transcription");u!==f&&n(7,f=u)}catch(u){console.error("Failed to get transcription:",u)}},300),te=window.setInterval(async()=>{if(g&&p)try{const u=await F("plugin:voice_commands:get_last_command");u&&(!R||R.trigger_text!==u.trigger_text)&&(n(14,b=await F("plugin:voice_commands:get_command_history")),ne(u),await F("plugin:voice_commands:clear_last_command"),n(12,R=u))}catch(u){console.error("Failed to check for voice commands:",u)}},300)}catch(u){console.error("Failed to load initial data:",u)}}),Ut(()=>{I!==null&&clearInterval(I),M!==null&&clearInterval(M),te!==null&&clearInterval(te),g&&re(),p&&me(!1)});async function ne(u){switch(console.log("Executing voice command:",u),Q(u),u.command_type){case"delete":const k=f.trim().split(/\s+/);if(k.length>0){const j=u.parameters?parseInt(u.parameters):Math.min(3,Math.max(1,Math.floor(k.length*.1)));n(7,f=k.slice(0,-j).join(" "))}break;case"undo":Q({command_type:"undo",message:"Undo action"});break;case"redo":Q({command_type:"redo",message:"Redo action"});break;case"capitalize":const X=f.lastIndexOf(" ");if(X>=0){const j=f.substring(X+1),Y=j.charAt(0).toUpperCase()+j.slice(1);n(7,f=f.substring(0,X+1)+Y)}break;case"lowercase":const ge=f.lastIndexOf(" ");if(ge>=0){const Y=f.substring(ge+1).toLowerCase();n(7,f=f.substring(0,ge+1)+Y)}break;case"newline":n(7,f+=`
`);break;case"newparagraph":n(7,f+=`

`);break;case"period":n(7,f=f.trimRight()+". ");break;case"comma":n(7,f=f.trimRight()+", ");break;case"questionmark":n(7,f=f.trimRight()+"? ");break;case"exclamationmark":n(7,f=f.trimRight()+"! ");break;case"pause":await re();break;case"resume":await O();break;case"stop":await re();break;default:Q({command_type:"unknown",message:`Unknown command: ${u.command_type}`})}}function Q(u){let k="";switch(u.command_type){case"delete":k="Deleted text";break;case"undo":k="Undo action";break;case"redo":k="Redo action";break;case"capitalize":k="Capitalized text";break;case"lowercase":k="Lowercased text";break;case"newline":k="New line added";break;case"newparagraph":k="New paragraph added";break;case"period":k="Period added";break;case"comma":k="Comma added";break;case"questionmark":k="Question mark added";break;case"exclamationmark":k="Exclamation mark added";break;case"pause":k="Recording paused";break;case"resume":k="Recording resumed";break;case"stop":k="Recording stopped";break;default:k=u.message||`Command: ${u.command_type}`}n(16,fe={type:u.command_type,message:k,show:!0}),K&&clearTimeout(K),K=setTimeout(()=>{n(16,fe=null)},3e3)}async function me(u=!p){try{n(9,p=u);try{let k;try{k=await F("plugin:voice_commands:get_voice_command_config")}catch{k={prefix:m||"computer",require_prefix:y,confidence:.7}}const X={...k,enabled:p};await F("plugin:voice_commands:set_voice_command_config",{config:X})}catch(k){console.error("Failed to set voice command config, falling back to old API:",k),await F("toggle_voice_commands",{enabled:u}),await F("save_voice_command_settings",{enabled:p,command_prefix:m||null,require_prefix:y,sensitivity:.8})}g&&(p?await F("plugin:voice_commands:start_voice_commands"):await F("plugin:voice_commands:stop_voice_commands")),console.log(`Voice commands ${p?"enabled":"disabled"}`)}catch(k){console.error("Failed to toggle voice commands:",k)}}async function O(){try{await F("plugin:audio:start_recording",{deviceName:c}),await F("plugin:transcribe:start_transcription",{options:{language:h,translate_to_english:B}}),p&&await F("plugin:voice_commands:start_voice_commands"),n(6,g=!0),console.log(`Started recording and transcription with device: ${c}, language: ${h}`)}catch(u){console.error("Failed to start recording:",u)}}async function re(){try{await F("plugin:transcribe:stop_transcription"),await F("plugin:audio:stop_recording"),p&&await F("plugin:voice_commands:stop_voice_commands"),n(6,g=!1),console.log("Stopped recording and transcription")}catch(u){console.error("Failed to stop recording:",u)}}const le=async()=>{g?await re():await O()};function oe(u){const k=a.find(X=>X[0]===u);return k?k[1]:u}async function W(){try{n(14,b=await F("plugin:voice_commands:get_command_history"))}catch(u){console.error("Failed to refresh command history:",u),n(14,b=[])}}async function _e(){try{await F("plugin:voice_commands:clear_command_history"),n(14,b=[])}catch(u){console.error("Failed to clear command history:",u)}}function Te(){c=Je(this),n(3,c),n(0,l)}function Pe(){v=Je(this),n(4,v),n(1,s)}function Ne(){h=Je(this),n(5,h),n(2,a)}function he(){B=this.checked,n(15,B)}function qe(){p=this.checked,n(9,p)}const x=()=>me(p);function se(){m=this.value,n(10,m)}function pe(){y=this.checked,n(11,y)}const Me=()=>n(7,f=""),ae=()=>{n(13,L=!L),L&&W()};function J(){f=this.value,n(7,f)}return[l,s,a,c,v,h,g,f,C,p,m,y,R,L,b,B,fe,me,le,oe,W,_e,Te,Pe,Ne,he,qe,x,se,pe,Me,ae,J]}class un extends Xt{constructor(e){super(),Jt(this,e,dn,rn,Tt,{},null,[-1,-1])}}new un({target:document.getElementById("app")});
